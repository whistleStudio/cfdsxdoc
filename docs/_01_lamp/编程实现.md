[[toc]]

# 智控台灯编程实现

> 案例:
>
> 1 按钮控制台灯 
>
> 2 光控台灯
>
> 3 语音识别控制台灯



## 1 按钮控制台灯

**功能：按钮按下时，灯盘点亮；松开时，灯盘熄灭。**

<a href="/tutorial/cfdsx/sb3/按钮控制台灯.sb3">点击下载程序: 按钮控制台灯.sb3</a>

按钮按下状态，返回数值1；松开状态，返回数值0。

灯盘高电平状态，点亮；低电平状态，熄灭。

![image-20240925194657382](/智控台灯编程实现.assets/image-20240925194657382.png)





## 2 光控台灯

### 2.1 屏显光照强度

**功能：屏显光线检测模块实时监测到的模拟数值大小，可用于光照阈值的选取。**

<a href="/tutorial/cfdsx/sb3/屏显光照强度.sb3">点击下载程序: 屏显光照强度.sb3</a>

为更好地观察屏显信息，屏幕刷新频率不宜过快，固添加短暂延时。

![image-20240925194830951](/智控台灯编程实现.assets/image-20240925194830951.png)



### 2.2 光控亮灭

**功能：光线检测模块监测光照情况，环境较暗时，台灯点亮；反之，熄灭。**

<a href="/tutorial/cfdsx/sb3/光控亮灭.sb3">点击下载程序:  光控亮灭.sb3</a>

这里数值“300”是区分环境亮暗的边界值，一般也被称为“阈值”；可以根据2.1程序选取合适的数值。

![image-20240925200250245](/智控台灯编程实现.assets/image-20240925200250245.png)



## 3 语音识别控制台灯

### 3.1 可识别词条ID

主控板板载语音识别模块。其中，固化内置了一系列能够被识别的常用语句词条。<a href="/tutorial/cfdsx/others/语音识别词条ID.xlsx">点击下载可识别词条与ID对照表</a>

调用如下指令（传感器库），可获取词条对应的编号ID。

![image-20240925201149255](/智控台灯编程实现.assets/image-20240925201149255.png)

使用语音识别功能，交互时，需先说出唤醒词“你好，小宁” 或 “你好，小金” 或 “你好，大师兄”，成功唤醒后，每条指令间隔均应大于1.5秒小于10秒，此时不用重复唤醒。

譬如：“你好，大师兄”  -（等待2秒）-  “开灯” - （等待5秒） - “关灯”

我们可以利用屏显功能验证可识别词条的ID值：

![image-20240925203537951](/智控台灯编程实现.assets/image-20240925203537951.png)

① 语音识别未检测到有效词条时，返回数值0；屏幕仅在检测到有效词条之后，刷新屏幕，并显示对应ID值。



### 3.2 语音控制开关灯

<a href="/tutorial/cfdsx/sb3/语音控制开关灯.sb3">点击下载程序:  语音控制开关灯.sb3</a>

![image-20240925204737779](/智控台灯编程实现.assets/image-20240925204737779.png)

子程序`提示灯`板载灯点亮1.5秒后熄灭，为增加交互者体验感，程序在识别到有效词条后调用`提示灯`；交互者可根据板载灯的点亮判断指令是否被识别，再在等待板载灯熄灭后，发布新的指令。