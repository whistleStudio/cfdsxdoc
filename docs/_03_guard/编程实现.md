[[toc]]

# 人脸识别门禁编程实现

> 案例：
>
> 1 人脸信息的录入（在线运行模式）
>
> 2 人脸信息的录入（离线运行模式）
>
> 3 人脸识别门禁
>
> <br>
>
> *注：案例1、2为人脸信息录入的两种方式，任选其一，均能完成录入操作*

<br>

<br>

## 1 人脸信息的录入（在线运行模式）

**功能：在线运行模式下，录入人脸信息**

<a href="/tutorial/cfdsx/sb3/03/人脸信息的录入（在线）.sb3">点击下载程序：人脸信息的录入（在线）.sb3</a>

操作步骤：

(1)  编写如下程序，并上传至大师兄主控板；

![image-20241008141616011](/人脸识别门禁编程实现.assets/image-20241008141616011.png)

(2)  程序上传完毕后，主控就已经开启了在线运行程序模式。现在在维持连接的状态下，可通过鼠标左键单击积木，实时地执行对应的脚本语句；

(3)  单击如下脚本，开启人脸检测功能；

![image-20241008142152998](/人脸识别门禁编程实现.assets/image-20241008142152998.png)

(4)  由于录入的人脸信息存储于视觉识别模块中，为确保之前可能存在的信息不会影响到后续的识别，可以先删除原有的数据（仅以编号1为例）。单击如下脚本：

![image-20241008142610878](/人脸识别门禁编程实现.assets/image-20241008142610878.png)

(5)  录入自定义编号的人脸信息（仅以编号1为例）。将摄像头正对待采集人脸，尽可能保证视觉屏幕中人脸图像完整，单击如下脚本：

![image-20241008142912799](/人脸识别门禁编程实现.assets/image-20241008142912799.png)

(6)  至此，便完成了在线运行模式下人脸信息的录入。可以尝试案例3《人脸识别门禁》的实现了。

<br>

## 2 人脸信息的录入（离线运行模式）

**功能：离线运行模式下，录入人脸信息**

<a href="/tutorial/cfdsx/sb3/03/人脸信息的录入（离线）.sb3">点击下载程序：人脸信息的录入（离线）.sb3</a>

待大师兄主控屏幕显示“请正视摄像头”提示信息后，按下板载B键，完成对编号1人员的面部信息录入。现在，可以尝试案例3《人脸识别门禁》的实现了。

![image-20241008144918037](/人脸识别门禁编程实现.assets/image-20241008144918037.png)

①  视觉识别模块在刚上电时，需要约3秒的自启时间，用于初始化一些必要内部设置。

<br>

## 3 人脸识别门禁

**功能：当人脸识别门禁系统检测到已录入人员信息时，门闸打开；3秒后，门闸自动关闭**。

<a href="/tutorial/cfdsx/sb3/03/人脸识别门禁.sb3">点击下载程序：人脸识别门禁.sb3</a>

门闸初始状态闭合，舵机停滞角度可根据实际门闸结构件与舵机转轴连接情况进行调整。

![image-20241008154532408](/人脸识别门禁编程实现.assets/image-20241008154532408.png)

①  套件内舵机型号为270°，快速模式下，舵机刚上电时，不会进行角度重置；

②  调用`检测人脸（返回数量）`积木时，会刷新当前获取到的人脸信息数据集，不可省略该调用。